package com.ppsea.ds.data.model;

import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import com.ppsea.ds.data.BaseObject;

public class Message extends BaseObject {
    /**
     * This field was generated by Apache iBATIS ibator.
     * This field corresponds to the database column message.id
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    private Integer id;

    /**
     * This field was generated by Apache iBATIS ibator.
     * This field corresponds to the database column message.player_id
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    private Integer playerId;

    /**
     * This field was generated by Apache iBATIS ibator.
     * This field corresponds to the database column message.type_id
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    private Integer typeId;

    /**
     * This field was generated by Apache iBATIS ibator.
     * This field corresponds to the database column message.content
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    private String content;

    /**
     * This field was generated by Apache iBATIS ibator.
     * This field corresponds to the database column message.create_time
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    private Date createTime;

    /**
     * This field was generated by Apache iBATIS ibator.
     * This field corresponds to the database column message.from_player_id
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    private Integer fromPlayerId;

    /**
     * This field was generated by Apache iBATIS ibator.
     * This field corresponds to the database column message.from_player_name
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    private String fromPlayerName;

    /**
     * This field was generated by Apache iBATIS ibator.
     * This field corresponds to the database column message.parameters
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    private String parameters;

    /**
     * This field was generated by Apache iBATIS ibator.
     * This field corresponds to the database column message.plain
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    private Byte plain;

    /**
     * This method was generated by Apache iBATIS ibator.
     * This method returns the value of the database column message.id
     *
     * @return the value of message.id
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    public Integer getId() {
        return id;
    }

    /**
     * This method was generated by Apache iBATIS ibator.
     * This method sets the value of the database column message.id
     *
     * @param id the value for message.id
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    public void setId(Integer id) {
        this.id = id;
    }

    /**
     * This method was generated by Apache iBATIS ibator.
     * This method returns the value of the database column message.player_id
     *
     * @return the value of message.player_id
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    public Integer getPlayerId() {
        return playerId;
    }

    /**
     * This method was generated by Apache iBATIS ibator.
     * This method sets the value of the database column message.player_id
     *
     * @param playerId the value for message.player_id
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    public void setPlayerId(Integer playerId) {
        this.playerId = playerId;
    }

    /**
     * This method was generated by Apache iBATIS ibator.
     * This method returns the value of the database column message.type_id
     *
     * @return the value of message.type_id
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    public Integer getTypeId() {
        return typeId;
    }

    /**
     * This method was generated by Apache iBATIS ibator.
     * This method sets the value of the database column message.type_id
     *
     * @param typeId the value for message.type_id
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    public void setTypeId(Integer typeId) {
        this.typeId = typeId;
    }

    /**
     * This method was generated by Apache iBATIS ibator.
     * This method returns the value of the database column message.content
     *
     * @return the value of message.content
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    public String getContent() {
        return content;
    }

    /**
     * This method was generated by Apache iBATIS ibator.
     * This method sets the value of the database column message.content
     *
     * @param content the value for message.content
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    public void setContent(String content) {
        this.content = content;
    }

    /**
     * This method was generated by Apache iBATIS ibator.
     * This method returns the value of the database column message.create_time
     *
     * @return the value of message.create_time
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    public Date getCreateTime() {
        return createTime;
    }

    /**
     * This method was generated by Apache iBATIS ibator.
     * This method sets the value of the database column message.create_time
     *
     * @param createTime the value for message.create_time
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    public void setCreateTime(Date createTime) {
        this.createTime = createTime;
    }

    /**
     * This method was generated by Apache iBATIS ibator.
     * This method returns the value of the database column message.from_player_id
     *
     * @return the value of message.from_player_id
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    public Integer getFromPlayerId() {
        return fromPlayerId;
    }

    /**
     * This method was generated by Apache iBATIS ibator.
     * This method sets the value of the database column message.from_player_id
     *
     * @param fromPlayerId the value for message.from_player_id
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    public void setFromPlayerId(Integer fromPlayerId) {
        this.fromPlayerId = fromPlayerId;
    }

    /**
     * This method was generated by Apache iBATIS ibator.
     * This method returns the value of the database column message.from_player_name
     *
     * @return the value of message.from_player_name
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    public String getFromPlayerName() {
        return fromPlayerName;
    }

    /**
     * This method was generated by Apache iBATIS ibator.
     * This method sets the value of the database column message.from_player_name
     *
     * @param fromPlayerName the value for message.from_player_name
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    public void setFromPlayerName(String fromPlayerName) {
        this.fromPlayerName = fromPlayerName;
    }

    /**
     * This method was generated by Apache iBATIS ibator.
     * This method returns the value of the database column message.parameters
     *
     * @return the value of message.parameters
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    public String getParameters() {
        return parameters;
    }

    /**
     * This method was generated by Apache iBATIS ibator.
     * This method sets the value of the database column message.parameters
     *
     * @param parameters the value for message.parameters
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    public void setParameters(String parameters) {
        this.parameters = parameters;
    }

    /**
     * This method was generated by Apache iBATIS ibator.
     * This method returns the value of the database column message.plain
     *
     * @return the value of message.plain
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    public Byte getPlain() {
        return plain;
    }

    /**
     * This method was generated by Apache iBATIS ibator.
     * This method sets the value of the database column message.plain
     *
     * @param plain the value for message.plain
     *
     * @ibatorgenerated Sun May 09 22:49:12 CST 2010
     */
    public void setPlain(Byte plain) {
        this.plain = plain;
    }
	public static final int MSG_PUBLIC = 0;
	public static final int MSG_SYSTEM = 1;
	public static final int MSG_PLAYER_PRIVATE = 2;
	public static final int MSG_TEAM = 3;

	// Interpreted actions
	private List<Action> actionList = new ArrayList<Action>();

	// For query only
	private int start = 0;
	private int end = 1;

	// Query from db and cache or only cache
	private boolean both = true;

	// type ids
	private int[] typeIds = null;
	
	private long timeInMilli = 0;

	public List<Action> getActionList() {
		return this.actionList;
	}

	public int getStart() {
		return start;
	}

	public void setStart(int start) {
		this.start = start;
	}

	public int getEnd() {
		return end;
	}

	public void setEnd(int end) {
		this.end = end;
	}

	public void setActionList(List<Action> actionList) {
		this.actionList = actionList;
	}

	public boolean isBoth() {
		return both;
	}

	public void setBoth(boolean both) {
		this.both = both;
	}

	public int[] getTypeIds() {
		return typeIds;
	}

	public void setTypeIds(int[] typeIds) {
		this.typeIds = typeIds;
	}
	
	public String convertCreateTime(){
		if(this.createTime == null) return "";
		
		long range = (System.currentTimeMillis() - (this.timeInMilli > 0?this.timeInMilli:this.createTime.getTime()))/1000;
		
		if(range < 60) return "几秒钟前";
		else{
			range /= 60;
			if(range < 60) return range + "分钟前";
			else{
				range /= 60;
				if(range < 24) return range + "小时前";
				else{
					range /= 24;
					if(range < 100) return range + "天前";
					else return "很久以前";
				}
			}
		}
	}
	
	public String toString(){
		StringBuffer sb = new StringBuffer();
		if(typeIds != null){
			for(int i = 0; i < typeIds.length; i++){
				sb.append(typeIds[i]);
				sb.append("/");
			}
		}
		
		return "playerId:" + playerId + "; fromPlayerId:" + fromPlayerId + "; types:" + sb.toString() + "; both:" + both;
	}

	public long getTimeInMilli() {
		return timeInMilli;
	}

	public void setTimeInMilli(long timeInMilli) {
		this.timeInMilli = timeInMilli;
	}
	
	public boolean equals(Object message){
		return id.equals(((Message)message).getId());
	}
}