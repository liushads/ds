package com.ppsea.ds.data.model;

import java.util.Date;
import java.util.HashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import java.util.TreeMap;

import com.ppsea.ds.data.BaseObject;
import com.ppsea.ds.data.Constants;
import com.ppsea.ds.data.ErrorMsg;
import com.ppsea.ds.data.ResourceCache;
import com.ppsea.ds.data.playeritem.PlayerItemHandler;
import com.ppsea.ds.service.ErrorCode;

public class PlayerItem extends BaseObject {
    /**
	 * This field was generated by Apache iBATIS ibator. This field corresponds to the database column player_item.id
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	private Integer id;
	/**
	 * This field was generated by Apache iBATIS ibator. This field corresponds to the database column player_item.player_id
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	private Integer playerId;
	/**
	 * This field was generated by Apache iBATIS ibator. This field corresponds to the database column player_item.item_id
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	private Integer itemId;
	/**
	 * This field was generated by Apache iBATIS ibator. This field corresponds to the database column player_item.curr_hp
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	private Integer currHp;
	/**
	 * This field was generated by Apache iBATIS ibator. This field corresponds to the database column player_item.is_use
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	private Integer isUse;
	/**
	 * This field was generated by Apache iBATIS ibator. This field corresponds to the database column player_item.amount
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	private Integer amount;
	/**
	 * This field was generated by Apache iBATIS ibator. This field corresponds to the database column player_item.bind_id
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	private Integer bindId;
	/**
	 * This field was generated by Apache iBATIS ibator. This field corresponds to the database column player_item.tong_id
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	private Integer tongId;
	/**
	 * This field was generated by Apache iBATIS ibator. This field corresponds to the database column player_item.shortcut_id
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	private Integer shortcutId;
	/**
	 * This field was generated by Apache iBATIS ibator. This field corresponds to the database column player_item.improve_level
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	private Integer improveLevel;
	/**
	 * This field was generated by Apache iBATIS ibator. This field corresponds to the database column player_item.is_exchange
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	private Boolean isExchange;
	/**
	 * This field was generated by Apache iBATIS ibator. This field corresponds to the database column player_item.in_exchange
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	private Boolean inExchange;
	/**
	 * This field was generated by Apache iBATIS ibator. This field corresponds to the database column player_item.exchange_price
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	private Integer exchangePrice;
	/**
	 * This field was generated by Apache iBATIS ibator. This field corresponds to the database column player_item.exchange_amount
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	private Integer exchangeAmount;
	/**
	 * This field was generated by Apache iBATIS ibator. This field corresponds to the database column player_item.curr_hole_amount
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	private Integer currHoleAmount;
	/**
	 * This field was generated by Apache iBATIS ibator. This field corresponds to the database column player_item.star_level
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	private Integer starLevel;
	/**
	 * This field was generated by Apache iBATIS ibator. This field corresponds to the database column player_item.promote_property
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	private String promoteProperty;
	/**
	 * This field was generated by Apache iBATIS ibator. This field corresponds to the database column player_item.updated_time
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	private Date updatedTime;
	/**
	 * This field was generated by Apache iBATIS ibator. This field corresponds to the database column player_item.created_time
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	private Date createdTime;
	/**
	 * This field was generated by Apache iBATIS ibator. This field corresponds to the database column player_item.buffRandIds
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	private String buffrandids;

	/**
	 * This method was generated by Apache iBATIS ibator. This method returns the value of the database column player_item.id
	 * @return  the value of player_item.id
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public Integer getId() {
		return id;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method sets the value of the database column player_item.id
	 * @param id  the value for player_item.id
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public void setId(Integer id) {
		this.id = id;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method returns the value of the database column player_item.player_id
	 * @return  the value of player_item.player_id
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public Integer getPlayerId() {
		return playerId;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method sets the value of the database column player_item.player_id
	 * @param playerId  the value for player_item.player_id
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public void setPlayerId(Integer playerId) {
		this.playerId = playerId;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method returns the value of the database column player_item.item_id
	 * @return  the value of player_item.item_id
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public Integer getItemId() {
		return itemId;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method sets the value of the database column player_item.item_id
	 * @param itemId  the value for player_item.item_id
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public void setItemId(Integer itemId) {
		this.itemId = itemId;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method returns the value of the database column player_item.curr_hp
	 * @return  the value of player_item.curr_hp
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public Integer getCurrHp() {
		return currHp;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method sets the value of the database column player_item.curr_hp
	 * @param currHp  the value for player_item.curr_hp
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public void setCurrHp(Integer currHp) {
		this.currHp = currHp;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method returns the value of the database column player_item.is_use
	 * @return  the value of player_item.is_use
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public Integer getIsUse() {
		return isUse;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method sets the value of the database column player_item.is_use
	 * @param isUse  the value for player_item.is_use
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public void setIsUse(Integer isUse) {
		this.isUse = isUse;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method returns the value of the database column player_item.amount
	 * @return  the value of player_item.amount
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public Integer getAmount() {
		return amount;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method sets the value of the database column player_item.amount
	 * @param amount  the value for player_item.amount
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public void setAmount(Integer amount) {
		this.amount = amount;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method returns the value of the database column player_item.bind_id
	 * @return  the value of player_item.bind_id
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public Integer getBindId() {
		return bindId;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method sets the value of the database column player_item.bind_id
	 * @param bindId  the value for player_item.bind_id
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public void setBindId(Integer bindId) {
		this.bindId = bindId;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method returns the value of the database column player_item.tong_id
	 * @return  the value of player_item.tong_id
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public Integer getTongId() {
		return tongId;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method sets the value of the database column player_item.tong_id
	 * @param tongId  the value for player_item.tong_id
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public void setTongId(Integer tongId) {
		this.tongId = tongId;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method returns the value of the database column player_item.shortcut_id
	 * @return  the value of player_item.shortcut_id
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public Integer getShortcutId() {
		return shortcutId;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method sets the value of the database column player_item.shortcut_id
	 * @param shortcutId  the value for player_item.shortcut_id
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public void setShortcutId(Integer shortcutId) {
		this.shortcutId = shortcutId;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method returns the value of the database column player_item.improve_level
	 * @return  the value of player_item.improve_level
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public Integer getImproveLevel() {
		return improveLevel;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method sets the value of the database column player_item.improve_level
	 * @param improveLevel  the value for player_item.improve_level
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public void setImproveLevel(Integer improveLevel) {
		this.improveLevel = improveLevel;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method returns the value of the database column player_item.is_exchange
	 * @return  the value of player_item.is_exchange
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public Boolean getIsExchange() {
		return isExchange;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method sets the value of the database column player_item.is_exchange
	 * @param isExchange  the value for player_item.is_exchange
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public void setIsExchange(Boolean isExchange) {
		this.isExchange = isExchange;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method returns the value of the database column player_item.in_exchange
	 * @return  the value of player_item.in_exchange
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public Boolean getInExchange() {
		return inExchange;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method sets the value of the database column player_item.in_exchange
	 * @param inExchange  the value for player_item.in_exchange
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public void setInExchange(Boolean inExchange) {
		this.inExchange = inExchange;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method returns the value of the database column player_item.exchange_price
	 * @return  the value of player_item.exchange_price
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public Integer getExchangePrice() {
		return exchangePrice;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method sets the value of the database column player_item.exchange_price
	 * @param exchangePrice  the value for player_item.exchange_price
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public void setExchangePrice(Integer exchangePrice) {
		this.exchangePrice = exchangePrice;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method returns the value of the database column player_item.exchange_amount
	 * @return  the value of player_item.exchange_amount
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public Integer getExchangeAmount() {
		return exchangeAmount;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method sets the value of the database column player_item.exchange_amount
	 * @param exchangeAmount  the value for player_item.exchange_amount
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public void setExchangeAmount(Integer exchangeAmount) {
		this.exchangeAmount = exchangeAmount;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method returns the value of the database column player_item.curr_hole_amount
	 * @return  the value of player_item.curr_hole_amount
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public Integer getCurrHoleAmount() {
		return currHoleAmount;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method sets the value of the database column player_item.curr_hole_amount
	 * @param currHoleAmount  the value for player_item.curr_hole_amount
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public void setCurrHoleAmount(Integer currHoleAmount) {
		this.currHoleAmount = currHoleAmount;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method returns the value of the database column player_item.star_level
	 * @return  the value of player_item.star_level
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public Integer getStarLevel() {
		return starLevel;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method sets the value of the database column player_item.star_level
	 * @param starLevel  the value for player_item.star_level
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public void setStarLevel(Integer starLevel) {
		this.starLevel = starLevel;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method returns the value of the database column player_item.promote_property
	 * @return  the value of player_item.promote_property
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public String getPromoteProperty() {
		return promoteProperty;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method sets the value of the database column player_item.promote_property
	 * @param promoteProperty  the value for player_item.promote_property
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public void setPromoteProperty(String promoteProperty) {
		this.promoteProperty = promoteProperty;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method returns the value of the database column player_item.updated_time
	 * @return  the value of player_item.updated_time
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public Date getUpdatedTime() {
		return updatedTime;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method sets the value of the database column player_item.updated_time
	 * @param updatedTime  the value for player_item.updated_time
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public void setUpdatedTime(Date updatedTime) {
		this.updatedTime = updatedTime;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method returns the value of the database column player_item.created_time
	 * @return  the value of player_item.created_time
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public Date getCreatedTime() {
		return createdTime;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method sets the value of the database column player_item.created_time
	 * @param createdTime  the value for player_item.created_time
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public void setCreatedTime(Date createdTime) {
		this.createdTime = createdTime;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method returns the value of the database column player_item.buffRandIds
	 * @return  the value of player_item.buffRandIds
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public String getBuffrandids() {
		return buffrandids;
	}

	/**
	 * This method was generated by Apache iBATIS ibator. This method sets the value of the database column player_item.buffRandIds
	 * @param buffrandids  the value for player_item.buffRandIds
	 * @ibatorgenerated  Thu Jan 31 23:07:14 CST 2013
	 */
	public void setBuffrandids(String buffrandids) {
		this.buffrandids = buffrandids;
	}
	transient private TreeMap<Integer, BuffRandVo> tmpBuffRands = new TreeMap<Integer, BuffRandVo>();
	
	public TreeMap<Integer, BuffRandVo> getTmpBuffRands() {
		return tmpBuffRands;
	}

	public void setTmpBuffRands(TreeMap<Integer, BuffRandVo> tmpBuffRands) {
		this.tmpBuffRands = tmpBuffRands;
	}

	/**
     * 
     **/
    public boolean checkBindOther(int pid){
		if( bindId > 0 && bindId != pid){
			return true;
		}
		return false;
	}
    
    /**
     * 是否锁定 
     **/
    public boolean isBind(){
    	return bindId > 0;
    }
    
	public void init(Item item){
		this.id = 0;
		this.amount = 1;
		this.item = item;
		this.itemId = item.getId();
		this.currHoleAmount = 0;
		this.improveLevel = 0;
		this.starLevel = 0;
	}
    // ------------------------------------------------------------------------------------- Item
	private List<ItemProperty> itemProperties;//promote
	private transient PlayerItemHandler handler;
	private transient long lastFeedTime;
	private List<PlayerItemAppend> appends;
    public Item item;
    private String idStr;	
    private ItemImprove improve;
    
    //强化附加属性Extra
    private int extraHp;//体力
    private int extraAttack;//攻击
    private int extraDefence;//防御
    private int extraCrit;//暴击
    private int extraParry;//格挡
    private int extraConstitution;//体质
    private int extraForces;//力量
    private int extraAgility;//敏捷
    private int extraIntelligence;//智慧
    
    //
    private boolean isPlant;
    private long plantTime;
    private int waterTimes;
    
    
    /**
     * @return the waterTimes
     */
    public int getWaterTimes() {
    	return waterTimes;
    }

	/**
     * @param waterTimes the waterTimes to set
     */
    public void setWaterTimes(int waterTimes) {
    	this.waterTimes = waterTimes;
    }

	/**
     * @return the isPlant
     */
    public boolean isPlant() {
    	return isPlant;
    }

	/**
     * @param isPlant the isPlant to set
     */
    public void setPlant(boolean isPlant) {
    	this.isPlant = isPlant;
    }

	/**
     * @return the plantTime
     */
    public long getPlantTime() {
    	return plantTime;
    }

	/**
     * @param plantTime the plantTime to set
     */
    public void setPlantTime(long plantTime) {
    	this.plantTime = plantTime;
    }

	public void setItem(Item item){ this.item = item; }
    public Item getItem(){ return item; }    

	public String getIdStr(){
		if(idStr == null)
			idStr = id.toString();		
		return idStr;
	}
	
	public List<PlayerItemAppend> getAppends() { return appends; }
	public void setAppends(List<PlayerItemAppend> appends) {this.appends = appends;	}
	
	/**
	 * did embed?
	 **/
	public boolean embedable(){
		if(item == null || item.getMaxAppend() == null || 
			item.getMaxAppend().intValue() <= 0) return false;		
		return true;
	}
	
	/**
	 * has enough space to embed.
	 **/
	public boolean hasEmbedSpace(){
		return ((appends == null?0:appends.size()) < currHoleAmount.intValue()); 
	}

	public List<ItemProperty> getItemProperties() { return itemProperties; }
	public void setItemProperties(List<ItemProperty> itemProperties) {this.itemProperties = itemProperties;	}
	public void appendPromoteProperty(ItemProperty property){
		if(itemProperties == null) itemProperties = new LinkedList<ItemProperty>();
		itemProperties.add(property);
	}	
	
	/**
	 * get specified property,if there is no such property, will return null object.
	 **/
	public ItemProperty getItemProperty(int id){
		for(ItemProperty property : itemProperties){
			if(property.getId().intValue() == id) return property;
		}
		return null;
	}
	
	/**
	 * remove special property
	 **/
	public boolean removeItemProperty(ItemProperty property){
		return itemProperties.remove(property);
	}

	public PlayerItemHandler getHandler() {
		return handler;
	}
	public void setHandler(PlayerItemHandler handler) {
		this.handler = handler;
	}
	
	public ErrorMsg use(){
		if(handler == null){
			return new ErrorMsg(ErrorCode.ERR_SYS, "use handler unfound");
		}
		return handler.use(this);
	}
	
	public ErrorMsg unuse(){
		if(handler == null){
			return new ErrorMsg(ErrorCode.ERR_SYS, "unuse handler unfound");
		}
		return handler.unuse(this);
	}
	public long getLastFeedTime() {
		return lastFeedTime;
	}
	public void setLastFeedTime(long lastFeedTime) {
		this.lastFeedTime = lastFeedTime;
	}
	public int getExtraAttack() {
		return extraAttack;
	}
	public void setExtraAttack(int extraAttack) {
		this.extraAttack = extraAttack;
	}
	public int getExtraDefence() {
		return extraDefence;
	}
	public void setExtraDefence(int extraDefence) {
		this.extraDefence = extraDefence;
	}
	public int getExtraAgility() {
		return extraAgility;
	}
	public void setExtraAgility(int extraAgility) {
		this.extraAgility = extraAgility;
	}		
	public int getExtraHp() {
		return extraHp;
	}
	public void setExtraHp(int extraHp) {
		this.extraHp = extraHp;
	}
	public int getExtraCrit() {
		return extraCrit;
	}

	public void setExtraCrit(int extraCrit) {
		this.extraCrit = extraCrit;
	}

	public int getExtraParry() {
		return extraParry;
	}

	public void setExtraParry(int extraParry) {
		this.extraParry = extraParry;
	}

	public int getExtraConstitution() {
		return extraConstitution;
	}

	public void setExtraConstitution(int extraConstitution) {
		this.extraConstitution = extraConstitution;
	}

	public int getExtraForces() {
		return extraForces;
	}

	public void setExtraForces(int extraForces) {
		this.extraForces = extraForces;
	}

	public int getExtraIntelligence() {
		return extraIntelligence;
	}

	public void setExtraIntelligence(int extraIntelligence) {
		this.extraIntelligence = extraIntelligence;
	}


	public ItemImprove getImprove() {
		return improve;
	}

	public void setImprove(ItemImprove improve) {
		this.improve = improve;
	}


	private TreeMap<Integer, BuffRandVo> buffRands = new TreeMap<Integer, BuffRandVo>();


	public TreeMap<Integer, BuffRandVo> getBuffRands() {
		return buffRands;
	}

	public void setBuffRands(TreeMap<Integer, BuffRandVo> buffRands) {
		this.buffRands = buffRands;
	}
	
	/**
	 * 计算强化属�?
	 */
	public void computeImprove() {
		extraHp = 0;// 体力
		extraAttack = 0;// 攻击
		extraDefence = 0;// 防御
		extraCrit = 0;// 暴击
		extraParry = 0;// 格挡
		extraConstitution = 0;// 体质
		extraForces = 0;// 力量
		extraAgility = 0;// 敏捷
		extraIntelligence = 0;// 智慧
		if (improveLevel > 0) {
			improve = ResourceCache.instance.getImproves().get(improveLevel);
			if (item.getHp() > 0) {
				extraHp += item.getHp() * improve.getHpPre() / Constants.BASE_PRE;
			}
			if (item.getAttackMax() > 0) {
				extraAttack += item.getAttackMax() * improve.getAttackPre() / Constants.BASE_PRE;
			}
			if (item.getDefence() > 0) {
				extraDefence += item.getDefence() * improve.getDefencePre() / Constants.BASE_PRE;
			}
			if (item.getCrit() > 0) {
				extraCrit += item.getCrit() * improve.getCritPre() / Constants.BASE_PRE;
			}
			if (item.getParry() > 0) {
				extraParry += item.getParry() * improve.getParryPre() / Constants.BASE_PRE;
			}
			if (item.getConstitution() > 0) {
				extraConstitution += item.getConstitution() * improve.getConstitutionPre() / Constants.BASE_PRE;
			}
			if (item.getForces() > 0) {
				extraForces += item.getForces() * improve.getForcesPre() / Constants.BASE_PRE;
			}
			if (item.getAgility() > 0) {
				extraAgility += item.getAgility() * improve.getAgilityPre() / Constants.BASE_PRE;
			}
			if (item.getIntelligence() > 0) {
				extraIntelligence += item.getIntelligence() * improve.getIntelligencePre() / Constants.BASE_PRE;
			}
		}
	}
	
	
	
	
	
	
	
	
	
	
	
	
}